{"version":3,"sources":["utils/usePosition.js","pages/Basketball.js","css/viz.module.css"],"names":["require","useState","useLayoutEffect","getStyle","el","styleName","getComputedStyle","getOffset","top","left","rect","getBoundingClientRect","doc","ownerDocument","Error","win","defaultView","parentWindow","winX","undefined","pageXOffset","documentElement","body","parentNode","scrollLeft","winY","pageYOffset","scrollTop","getPosition","offset","parentOffset","marginTop","parseInt","marginLeft","offsetParent","nodeType","usePosition","ref","_getPosition","current","_useState","_useState2","Object","slicedToArray","ElementPosition","setElementPosition","handleChangePosition","window","addEventListener","removeEventListener","Tooltip","_ref","tooltip","react_default","a","createElement","className","styles","Tooltipposition","join","style","concat","pos","contents","Tooltipcontents","tooltipname","name","tooltipdesc","val","signed","age","tooltipContext","React","createContext","tooltip_init","active","colorMap","getAllColors","moneyConverter","d","Number","replace","formatMoney","format","PADDING","size","scaleSqrt","domain","range","CircleLabel","_ref2","r","height","x","y","dy","fontSize","namelabel","split","map","i","key","Circle","_ref3","showname","mainColor","secColor","_useContext","useContext","setTooltip","resetTooltip","or","ox","oy","_useSpring","useSpring","to","dr","transform","web","g","onMouseOver","invert","onTouchStart","onMouseOut","circle","node","fill","opacity","stroke","Basketball_CircleLabel","TeamCircles","_ref4","width","salaries","year","isVisible","_useState3","_useState4","data","setData","useEffect","newdata","totals","length","children","obj","objectSpread","packSiblings","Player","convertName","n","index","indexOf","substring","openBasketballRef","open","Team","_ref5","team_data","team_names","_useState5","_useState6","setSalaries","useRef","_usePosition","my_team","abrv","secondaryColor","csv","Age","2018-19","2019-20","2020-21","2021-22","2022-23","2023-24","then","root","slice","tooltip_state","useTooltip","Provider","value","bballteamsvg","titlelabel","onClick","dx","assign","Basketball_Tooltip","years","YearClicker","_ref6","setYear","stepcontainer","steptitle","textDecoration","color","y1","y2","formatYear","LandingPage","_ref7","next","Basketball","state","t","landing","clearInterval","_this","setState","pauseOrPlay","setInterval","_this2","this","forEach","long","short","all_salaries","_this3","id","Fragment","Basketball_YearClicker","pause","vizcontainer","lib_default","display","partialVisibility","Basketball_LandingPage","Component","module","exports"],"mappings":"2MACoCA,EAAQ,GAAtCC,aAAUC,oBAEhB,SAASC,EAASC,EAAIC,GACpB,OAAOC,iBAAiBF,GAAIC,GAG9B,SAASE,EAAUH,GACjB,IAAKA,EACH,MAAO,CAACI,IAAK,EAAGC,KAAM,GAExB,IAAMC,EAAON,EAAGO,wBACVC,EAAMR,EAAGS,cACf,IAAKD,EAAK,MAAM,IAAIE,MAAM,oCAC1B,IAAMC,EAAMH,EAAII,aAAeJ,EAAIK,aAE7BC,OAA4BC,IAApBJ,EAAIK,YAChBL,EAAIK,aACHR,EAAIS,iBAAmBT,EAAIU,KAAKC,YAAcX,EAAIU,MAAME,WACrDC,OAA4BN,IAApBJ,EAAIW,YAChBX,EAAIW,aACHd,EAAIS,iBAAmBT,EAAIU,KAAKC,YAAcX,EAAIU,MAAMK,UAE3D,MAAO,CACLnB,IAAKE,EAAKF,IAAMU,EAChBT,KAAMC,EAAKD,KAAOgB,GAItB,SAASG,EAAYxB,GACnB,IAAKA,EACH,MAAO,CAACI,IAAK,EAAGC,KAAM,GAExB,IAAIoB,EAAStB,EAAUH,GACnB0B,EAAe,CAACtB,IAAK,EAAGC,KAAM,GAC5BsB,EAAYC,SAAS7B,EAASC,EAAI,eAAiB,EACnD6B,EAAaD,SAAS7B,EAASC,EAAI,gBAAkB,EAE3D,GAAiC,UAA7BD,EAASC,EAAI,YACfyB,EAASzB,EAAGO,4BACP,CAKL,IAJA,IAAMC,EAAMR,EAAGS,cAEXqB,EAAe9B,EAAG8B,cAAgBtB,EAAIS,gBAEnCa,IACAA,IAAiBtB,EAAIU,MAAQY,IAAiBtB,EAAIS,kBAEvDa,EAAeA,EAAaX,WAG1BW,GAAgBA,IAAiB9B,GAAgC,IAA1B8B,EAAaC,YACtDL,EAAevB,EAAU2B,IACZ1B,KAAOwB,SAAS7B,EAAS+B,EAAc,oBAAsB,EAC1EJ,EAAarB,MAAQuB,SAAS7B,EAAS+B,EAAc,qBAAuB,GAIhF,MAAO,CACL1B,IAAKqB,EAAOrB,IAAMsB,EAAatB,IAAMuB,EACrCtB,KAAMoB,EAAOpB,KAAOqB,EAAarB,KAAOwB,GA6B7BG,MAzBf,SAAqBC,GAAK,IAAAC,EACJV,EAAYS,EAAIE,SAA9B/B,EADkB8B,EAClB9B,IAAKC,EADa6B,EACb7B,KADa+B,EAEqBvC,EAAS,CACpDO,IAAKA,EACLC,KAAMA,IAJgBgC,EAAAC,OAAAC,EAAA,EAAAD,CAAAF,EAAA,GAEnBI,EAFmBH,EAAA,GAEFI,EAFEJ,EAAA,GAOxB,SAASK,IACHT,GAAOA,EAAIE,SACbM,EAAmBjB,EAAYS,EAAIE,UAavC,OATArC,EAAgB,WAId,OAHA4C,IACAC,OAAOC,iBAAiB,SAAUF,GAE3B,WACLC,OAAOE,oBAAoB,SAAUH,KAEtC,CAACT,IAEGO,oDCnEHM,SAAU,SAAAC,GAA2B,IAAxBC,EAAwBD,EAAxBC,QAAS5C,EAAe2C,EAAf3C,IAAKC,EAAU0C,EAAV1C,KAC7B,OACI4C,EAAAC,EAAAC,cAAA,OAAKC,UAAW,CAACC,IAAOP,QAASO,IAAOC,iBAAiBC,KAAK,KAAMC,MAAO,CAACnD,KAAI,GAAAoD,OAAIpD,EAAO2C,EAAQU,IAAI,GAAvB,MAA+BtD,IAAG,GAAAqD,OAAKrD,EAAM4C,EAAQU,IAAI,GAAvB,UAC3GV,EAAQW,UACPV,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOO,iBACnBX,EAAAC,EAAAC,cAAA,KAAGC,UAAWC,IAAOQ,aAAcb,EAAQW,SAASG,MACpDb,EAAAC,EAAAC,cAAA,KAAGC,UAAWC,IAAOU,aAArB,WAA2Cf,EAAQW,SAASK,KAC5Df,EAAAC,EAAAC,cAAA,KAAGC,UAAWC,IAAOU,aAArB,iBAAiDf,EAAQW,SAASM,QAClEhB,EAAAC,EAAAC,cAAA,KAAGC,UAAWC,IAAOU,aAArB,QAAwCf,EAAQW,SAASO,SAQvEC,EAAiBC,IAAMC,gBACvBC,EAAe,SAACX,EAASD,EAAIa,GAIlC,MAFU,CAACZ,WAAUD,QAkBtB,IAAMc,EAAWC,yBAEXC,EAAiB,SAACC,GAGvB,MAFiB,KAANA,EAAW,EAAIC,OAAOD,EAAEE,QAAQ,aAAc,MAKpDC,EAAcC,YAAO,OAErBC,EAAU,EAGVC,EAAOC,cACVC,OAAO,CAAC,EAAG,MACXC,MAAM,CAAC,EAAE,KAENC,EAAc,SAAAC,GAAc,IAAZxB,EAAYwB,EAAZxB,KAAKyB,EAAOD,EAAPC,EACtBN,EAAO,OACVO,EAAS,GAMV,OALGD,EAAI,KACNN,EAAO,OACPO,EAAS,IAGFvC,EAAAC,EAAAC,cAAA,QAAMsC,EAAE,IAAIC,EAAE,IAAIC,GAAG,IAAIC,SAAUX,EAAM7B,UAAWC,IAAOwC,WACjE/B,EAAKgC,MAAM,KAAKC,IAAI,SAACpB,EAAEqB,GAAH,OAAS/C,EAAAC,EAAAC,cAAA,SAAO8C,IAAKD,EAAGP,EAAG,EAAGE,GAAIK,EAAER,GAASb,OAIpE,SAASuB,EAATC,GAA+E,IAA9DV,EAA8DU,EAA9DV,EAAEC,EAA4DS,EAA5DT,EAAEH,EAA0DY,EAA1DZ,EAAGzB,EAAuDqC,EAAvDrC,KAAKI,EAAkDiC,EAAlDjC,IAAID,EAA8CkC,EAA9ClC,OAAQmC,EAAsCD,EAAtCC,SAAUC,EAA4BF,EAA5BE,UAAWC,EAAiBH,EAAjBG,SAAS/B,EAAQ4B,EAAR5B,OAAQgC,EAG3CC,qBAAWrC,GAAvCsC,EAHuEF,EAGvEE,WAAYC,EAH2DH,EAG3DG,aAEbC,EAAKpB,EAAI,EAAI,EAAIA,EAEjBqB,OAAW7F,IAAN0E,EAAkB,EAAIA,EAC3BoB,OAAW9F,IAAN2E,EAAkB,EAAIA,EAR6CoB,EAWtDC,YAAU,CAACC,GAAG,CAACC,GAAGN,EAAIO,UAAS,aAAAzD,OAAcmD,EAAd,KAAAnD,OAAoBoD,EAApB,QAAhDI,EAXuEH,EAWvEG,GAAIC,EAXmEJ,EAWnEI,UAMX,OAAQjE,EAAAC,EAAAC,cAACgE,EAAA,EAASC,EAAV,CACHC,YAAa,WACZZ,EAAW,CAAC9C,SAAS,CAACG,OAAKI,MAAID,SAAQD,IAAKc,EAAYG,EAAKqC,OAAO/B,EAAIP,KAAatB,IAAI,CAAC,GAAG,KAAMa,OAAOT,KAE3GyD,aAAc,WACVhD,IAAWT,EACb4C,IAEDD,EAAW,CAAC9C,SAAS,CAACG,OAAKI,MAAID,SAAQD,IAAKc,EAAYG,EAAKqC,OAAO/B,EAAIP,KAAatB,IAAI,CAAC,GAAG,KAAMa,OAAOT,KAE3G0D,WAAY,kBAAMd,KAClBtD,UAAU,eACV8D,UAAWA,GAEbjE,EAAAC,EAAAC,cAACgE,EAAA,EAASM,OAAV,CAAiBrE,UAAWC,IAAOqE,KAAMC,KAAMtB,EAAWuB,QAAS9D,IAASS,EAAU,GAAK,GAAIsD,OAAQvB,EAAUf,EAAG0B,IAEnHb,EAAYnD,EAAAC,EAAAC,cAAC2E,EAAD,CAAavC,EAAGA,EAAGzB,KAAMA,IAAU,MAKpD,SAASiE,EAATC,GAAuE,IAAjDC,EAAiDD,EAAjDC,MAAOzC,EAA0CwC,EAA1CxC,OAAQ0C,EAAkCF,EAAlCE,SAAUC,EAAwBH,EAAxBG,KAAMC,EAAkBJ,EAAlBI,UAAU7D,EAAQyD,EAARzD,OAAQ8D,EAE9CxI,mBAASqI,GAFqCI,EAAAhG,OAAAC,EAAA,EAAAD,CAAA+F,EAAA,GAE/DE,EAF+DD,EAAA,GAEzDE,EAFyDF,EAAA,GA2BvE,OAvBCG,oBAAU,WAET,IAAIC,EAAU,GACbA,EAAQrC,UAAY6B,EAAS7B,UAE7BqC,EAAQpC,SAAW4B,EAAS5B,SAC5BoC,EAAQC,OAAST,EAASA,EAASU,OAAO,GAE3CF,EAAQG,SAAWX,EAASW,SAAS9C,IAAI,SAAApB,GACxC,IAAImE,EAAGxG,OAAAyG,EAAA,EAAAzG,CAAA,GAAOqC,GAKd,OAJAmE,EAAIvD,EAAIN,EAAK6D,EAAIX,IACjBW,EAAI1C,SAAW0C,EAAIvD,EAAI,GAGhBuD,IAGPE,YAAaN,EAAQG,UAErBL,EAAQE,IAER,CAACP,IAEGC,EAAanF,EAAAC,EAAAC,cAAA,KAAG+D,UAAS,aAAAzD,OAAewE,EAAM,EAArB,KAAAxE,OAA0B+B,EAAO,EAAjC,MAC5B+C,GAAQA,EAAKM,SAAS9C,IAAI,SAACpB,EAAEqB,GAAH,OAE1B/C,EAAAC,EAAAC,cAAC+C,EAAD,CAAQG,UAAWkC,EAAKlC,UAAWC,SAAUiC,EAAKjC,SAChDF,SAAUzB,EAAEyB,SACZtC,KAAMa,EAAEsE,OACRhD,IAAKD,EACLP,EAAGd,EAAEc,EACLC,EAAGf,EAAEe,EACLH,EAAGZ,EAAEY,EAAIP,EACTd,IAAKS,EAAET,IACPD,OAAQU,EAAEV,OACVM,OAAQA,OAGJ,KAGV,IAAM2E,EAAc,SAACC,GAEpB,IAAIC,EAAQD,EAAEE,QAAQ,MAItB,OAAOF,EAAEG,UAAU,EAAEF,IAKhBG,EAAoB,SAACzF,GAE1BnB,OAAO6G,KAAP,kDAAA/F,OAA8DK,EAA9D,WAGD,SAAS2F,EAATC,GAAmE,IAApDC,EAAoDD,EAApDC,UAAUC,EAA0CF,EAA1CE,WAAW3B,EAA+ByB,EAA/BzB,MAAMzC,EAAyBkE,EAAzBlE,OAAO2C,EAAkBuB,EAAlBvB,KAAMC,EAAYsB,EAAZtB,UAAYyB,EAElChK,mBAAS,MAFyBiK,EAAAxH,OAAAC,EAAA,EAAAD,CAAAuH,EAAA,GAE3D3B,EAF2D4B,EAAA,GAEjDC,EAFiDD,EAAA,GAG5D7H,EAAM+H,mBAHsDC,EAMhDjI,EAAYC,GAAzB7B,EAN6D6J,EAM7D7J,IAAKC,EANwD4J,EAMxD5J,KAEVoI,oBAAU,WAET,IAAMyB,EAAUP,EAAUF,KAEpBU,EAAOP,EAAWM,GACnB7D,EAAY7B,EAAS2F,GAAM9D,UAC3BC,EAAW9B,EAAS2F,GAAMC,eAG/BC,YAAG,eAAA5G,OAAgBkG,EAAUF,KAA1B,QAAsC,SAAS9E,GAC9C,MAAO,CAELsE,OAAQC,EAAYvE,EAAEsE,QACtB/E,IAAKS,EAAE2F,IACPrG,OAAQU,EAAE,gBACVY,EAAGN,EAAKP,EAAeC,EAAEwD,KACzB/B,SAAUnB,EAAKP,EAAeC,EAAEwD,KAAU,GAC1CoC,UAAW7F,EAAeC,EAAE,YAC5B6F,UAAW9F,EAAeC,EAAE,YAC5B8F,UAAW/F,EAAeC,EAAE,YAC5B+F,UAAWhG,EAAeC,EAAE,YAC5BgG,UAAWjG,EAAeC,EAAE,YAC5BiG,UAAWlG,EAAeC,EAAE,eAE9BkG,KAAK,SAAAlG,GAER,IAAImG,EAAO,CAACjC,SAAUlE,EAAEoG,MAAM,EAAEpG,EAAEiE,OAAO,IAMtCkC,EAAKzE,UAAYA,EACjByE,EAAKxE,SAAWA,EAChBwE,EAAKnC,OAAShE,EAAEA,EAAEiE,OAAO,GAE3BmB,EAAYe,MAGb,IAGF,IAAME,EA/LP,WAAqB,IAAA5I,EACUvC,mBAASyE,EAAa,KAAK,CAAC,EAAE,KADxCjC,EAAAC,OAAAC,EAAA,EAAAD,CAAAF,EAAA,GACZY,EADYX,EAAA,GACHoE,EADGpE,EAAA,GAMnB,MAAO,CAAEW,UAASyD,aAAYC,aAFT,kBAAMD,EAAWnC,EAAa,KAAM,CAAC,EAAE,OA2LvC2G,GAEtB,OACChI,EAAAC,EAAAC,cAACgB,EAAe+G,SAAhB,CAAyBC,MAAOH,GAChC/H,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO+H,aAAcnD,MAAOA,EAAOzC,OAAQA,EAAQvD,IAAKA,GACvEgB,EAAAC,EAAAC,cAAA,QAAMC,UAAWC,IAAOgI,WAAYC,QAAS,kBAAM/B,EAAkBK,EAAWD,EAAUF,QAAQ8B,GAAG,KAAK5F,GAAG,MAC3GgE,EAAUF,KADZ,MACqBvB,GAAQ,IAAAzE,OAAQqB,EAAYoD,EAASS,OAAOR,IAApC,SAEd,OAAbD,GAAqBjF,EAAAC,EAAAC,cAAC4E,EAADzF,OAAAkJ,OAAA,CAAajH,OAAQyG,EAAchI,QAAQuB,QAAa,CAAC4D,OAAKF,QAAMzC,SAAQ4C,aAA5E,CAAwFF,SAAUA,MAE1HjF,EAAAC,EAAAC,cAACsI,EAAD,CAASzI,QAASgI,EAAchI,QAAS5C,IAAKA,EAAKC,KAAMA,KAI3D,IAAMqL,EAAQ,CAAC,UAAU,UAAU,UAAU,UAAU,UAAU,WAa3DC,EAAc,SAAAC,GAAqB,IAAnBzD,EAAmByD,EAAnBzD,KAAM0D,EAAaD,EAAbC,QAE3B,OAAQ5I,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOyI,eAC7BJ,EAAM3F,IAAK,SAACpB,EAAEqB,GAAH,OAAS/C,EAAAC,EAAAC,cAAA,MAAI8C,IAAKD,EAAG5C,UAAWC,IAAO0I,UAAUT,QAAS,kBAAMO,EAAQ7F,IAAIxC,MAAOmB,IAAMwD,EAAO,CAAC6D,eAAiB,YAAYC,MAAM,aAAe,MAb9I,SAACvG,GAElB,IAAIwG,EAAKxG,EAAE4D,UAAU,EAAE,GACtB6C,EAAKzG,EAAE4D,UAAU5D,EAAEkD,OAAO,EAAElD,EAAEkD,QAE/B,UAAAnF,OAAWyI,EAAX,MAAAzI,OAAkB0I,GAQoJC,CAAWzH,QAI7K0H,EAAc,SAAAC,GAAYA,EAAVC,KAGrB,OAAOtJ,EAAAC,EAAAC,cAAA,WACJF,EAAAC,EAAAC,cAAA,2DAIEqJ,6MAGLC,MAAQ,CAACtE,KAAM,UAAUiB,MAAM,EAAEsD,EAAE,KAAMC,SAAS,KAGlDd,QAAU,SAAC7F,IACA,IAAPA,GACF4G,cAAcC,EAAKJ,MAAMC,GACzBG,EAAKC,SAAS,CAAC3E,KAAKuD,EAAM1F,GAAIoD,MAAMpD,EAAG0G,EAAE,QAIzCG,EAAKC,SAAS,SAAAL,GAAK,OAAIA,EAAMrD,QAAUsC,EAAM9C,OAAS,EAAI,CAACT,KAAKuD,EAAM,GAAItC,MAAM,GAAK,CAACjB,KAAKuD,EAAMe,EAAMrD,MAAQ,GAAGA,MAAOqD,EAAMrD,MAAM,QAiCvI2D,YAAc,WACb,GAAoB,OAAjBF,EAAKJ,MAAMC,EACbE,cAAcC,EAAKJ,MAAMC,GACzBG,EAAKC,SAAS,CAACJ,EAAE,WACZ,CACL,IAAIA,EAAIM,YAAY,WACnBH,EAAKhB,SAAS,IACb,KACFgB,EAAKC,SAAS,CAACJ,2FArCE,IAAAO,EAAAC,KAGlB7C,YAAG,0BAA2BQ,KAAK,SAACtC,GACnC8B,YAAG,uBAAwBQ,KAAK,SAACjB,GAGhC,IAAI7D,EAAM,GAEV6D,EAAWuD,QAAQ,SAACxI,GAEnBoB,EAAIpB,EAAEyI,MAAQzI,EAAE0I,QAIjBJ,EAAKH,SAAS,CAACQ,aAAc/E,EAAMqB,WAAY7D,QAMjD,IAAI2G,EAAIM,YAAY,WACnBC,EAAKpB,SAAS,IACb,KAEFqB,KAAKJ,SAAS,CAACJ,uCAgBR,IAAAa,EAAAL,KACP,OAAQjK,EAAAC,EAAAC,cAAA,OAAKqK,GAAG,kBACZN,KAAKT,MAAME,QACZ1J,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuK,SAAA,KACCxK,EAAAC,EAAAC,cAACuK,EAAD,CAAa7B,QAASqB,KAAKrB,QAAS1D,KAAM+E,KAAKT,MAAMtE,OACrDlF,EAAAC,EAAAC,cAAA,KAAGC,UAAWC,IAAOsK,MAAOrC,QAAS4B,KAAKH,aAAcG,KAAKT,MAAMC,EAAI,QAAU,QACjFzJ,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOuK,cACtBV,KAAKT,MAAMa,cAAgBJ,KAAKT,MAAM7C,YAAcsD,KAAKT,MAAMa,aAAavH,IAAK,SAACpB,EAAEqB,GAAH,OAClF/C,EAAAC,EAAAC,cAAC0K,EAAA3K,EAAD,CAAiBzB,OAAQ,IAAK+B,MAAO,CAACyE,MAAQ,QAAS6F,QAAU,UAAWC,mBAAiB,EAAC9H,IAAKD,GAClG/C,EAAAC,EAAAC,cAACsG,EAAD,CAAMG,WAAY2D,EAAKd,MAAM7C,WAAYzB,KAAMoF,EAAKd,MAAMtE,KAAOF,MAAO,IAAKzC,OAAQ,IAAKmE,UAAWhF,SAKrG1B,EAAAC,EAAAC,cAAC6K,EAAD,CAAazB,KAAM,kBAAMgB,EAAKT,SAAS,CAACH,SAAS,eAxE/BsB,aA8EVzB,gCClWf0B,EAAAC,QAAA,CAAkBzG,KAAA,kBAAA7B,UAAA,uBAAAkG,UAAA,uBAAAD,cAAA,2BAAA8B,aAAA,0BAAAD,MAAA,mBAAAtC,WAAA,wBAAAvI,QAAA,qBAAAe,YAAA,yBAAAD,gBAAA,6BAAAwH,aAAA","file":"static/js/6.0aa7a09f.chunk.js","sourcesContent":["'use strict';\nlet { useState, useLayoutEffect } = require('react');\n\nfunction getStyle(el, styleName) {\n  return getComputedStyle(el)[styleName];\n};\n\nfunction getOffset(el) {\n  if (!el) {\n    return {top: 0, left: 0}\n  }\n  const rect = el.getBoundingClientRect();\n  const doc = el.ownerDocument;\n  if (!doc) throw new Error('Unexpectedly missing <document>.');\n  const win = doc.defaultView || doc.parentWindow;\n\n  const winX = (win.pageXOffset !== undefined)\n  ? win.pageXOffset\n  : (doc.documentElement || doc.body.parentNode || doc.body).scrollLeft;\n  const winY = (win.pageYOffset !== undefined)\n  ? win.pageYOffset\n  : (doc.documentElement || doc.body.parentNode || doc.body).scrollTop;\n\n  return {\n    top: rect.top + winX,\n    left: rect.left + winY,\n  };\n};\n\nfunction getPosition(el) {\n  if (!el) {\n    return {top: 0, left: 0 };\n  }\n  let offset = getOffset(el);\n  let parentOffset = {top: 0, left: 0 };\n  const marginTop = parseInt(getStyle(el, 'marginTop')) || 0;\n  const marginLeft = parseInt(getStyle(el, 'marginLeft')) || 0;\n\n  if (getStyle(el, 'position') === 'fixed') {\n    offset = el.getBoundingClientRect();\n  } else {\n    const doc = el.ownerDocument;\n\n    let offsetParent = el.offsetParent || doc.documentElement;\n\n    while (offsetParent &&\n          (offsetParent === doc.body || offsetParent === doc.documentElement)\n    ) {\n      offsetParent = offsetParent.parentNode;\n    }\n\n    if (offsetParent && offsetParent !== el && offsetParent.nodeType === 1) {\n      parentOffset = getOffset(offsetParent);\n      parentOffset.top += parseInt(getStyle(offsetParent, 'borderTopWidth')) || 0;\n      parentOffset.left += parseInt(getStyle(offsetParent, 'borderLeftWidth')) || 0;\n    }\n  }\n\n  return {\n    top: offset.top - parentOffset.top - marginTop,\n    left: offset.left - parentOffset.left - marginLeft,\n  };\n}\n\nfunction usePosition(ref) {\n  let { top, left } = getPosition(ref.current);\n  let [ElementPosition, setElementPosition ] = useState({\n    top: top,\n    left: left,\n  });\n\n  function handleChangePosition() {\n    if (ref && ref.current) {\n      setElementPosition(getPosition(ref.current))\n    }\n  }\n\n  useLayoutEffect(() => {\n    handleChangePosition();\n    window.addEventListener('resize', handleChangePosition);\n\n    return () => {\n      window.removeEventListener('resize', handleChangePosition);\n    }\n  }, [ref])\n\n  return ElementPosition;\n};\n\nexport default usePosition;\n","import React, { Component, useEffect, useState, useRef,useContext,useLayoutEffect } from 'react'\nimport {useSpring, animated} from 'react-spring'\nimport { getAllColors, getFullName } from 'nba-color';\n\nimport TrackVisibility from 'react-on-screen';\n\nimport usePosition from '../utils/usePosition.js';\n\nimport styles from '../css/viz.module.css';\n\nimport {csv} from 'd3-fetch'\nimport {packSiblings} from 'd3-hierarchy'\nimport {scaleSqrt} from 'd3-scale'\nimport {format} from 'd3-format'\n\n\nimport '../css/Basketball.scss'\n\n\nconst Tooltip = ({ tooltip, top, left}) => {\n    return (\n        <div className={[styles.Tooltip, styles.Tooltipposition].join(' ')} style={{left:`${left + tooltip.pos[0]}px`, top: `${top + tooltip.pos[1]}px`}}>\n            {!!tooltip.contents && (\n                <div className={styles.Tooltipcontents}>\n                    <p className={styles.tooltipname}>{tooltip.contents.name }</p>\n                    <p className={styles.tooltipdesc}>Salary: {tooltip.contents.val }</p>\n                    <p className={styles.tooltipdesc}>Signed Using: {tooltip.contents.signed }</p>\n                    <p className={styles.tooltipdesc}>Age: {tooltip.contents.age }</p>\n                </div>\n            )}\n        </div>\n    )\n}\n\n///TOOLTIP START\nconst tooltipContext = React.createContext();\nconst tooltip_init = (contents,pos,active) => { \n\t\t\n\tlet obj = {contents, pos} \n\n\treturn obj\n\n}\n\nfunction useTooltip(){\n  const [tooltip, setTooltip]= useState(tooltip_init(null,[0,0]));\n\n\n  const resetTooltip = () => setTooltip(tooltip_init(null, [0,0]))\n\n  return { tooltip, setTooltip, resetTooltip};\n}\n\n//TOOLTIPEND\n\n\nconst colorMap = getAllColors()\n\nconst moneyConverter = (d) => {\n\tlet val = (d === \"\" ? 0 : Number(d.replace(/[^0-9\\.]+/g, \"\")))\n\n\treturn val\n}\n\nconst formatMoney = format(\".4s\");\n\nconst PADDING = 3;\n\n\nconst size = scaleSqrt()\n\t\t.domain([0, 30000000])\n\t\t.range([0,50]);\n\nconst CircleLabel = ({name,r}) => {\n\tlet size = '.9em',\n\t\theight = 15;\n\tif(r < 29){\n\t\tsize = '.7em';\n\t\theight = 10\n\t}\n\n return (<text x=\"0\" y=\"0\" dy=\"0\" fontSize={size} className={styles.namelabel}>\n\t {name.split(' ').map((d,i) => <tspan key={i} x={0} dy={i*height}>{d}</tspan> )}\n\t </text>)\n}\n\nfunction Circle({x,y,r, name,age,signed, showname, mainColor, secColor,active}){\n\n\n\tconst {setTooltip, resetTooltip} = useContext(tooltipContext)\n\n\tconst or = r < 0 ? 0 : r;\n\n\tconst ox = x === undefined ? 0 : x;\n\tconst oy = y === undefined ? 0 : y;\n\n\n\tconst {dr, transform} = useSpring({to:{dr:or, transform:`translate(${ox},${oy})`}})\n\n\n// onMouseOver={() => setTooltip({contents:name, pos:[ox + 175,oy + 175] })} \n\n\n\treturn (<animated.g \n\t\t\t\t\t\tonMouseOver={() => {\n\t\t\t\t\t\t\tsetTooltip({contents:{name,age,signed, val: formatMoney(size.invert(r + PADDING)) }, pos:[20,300], active:name }) \n\t\t\t\t\t\t}} \n\t\t\t\t\t\tonTouchStart={() => {\n\t\t\t\t\t\t\tif(active === name) {\n\t\t\t\t\t\t\t\tresetTooltip();\n\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tsetTooltip({contents:{name,age,signed, val: formatMoney(size.invert(r + PADDING)) }, pos:[20,300], active:name }) \n\t\t\t\t\t\t}} \n\t\t\t\t\t\tonMouseOut={() => resetTooltip()} \n\t\t\t\t\t\tclassName=\"circle-group\" \n\t\t\t\t\t\ttransform={transform}>\t\n\t\t\t\t\n\t\t\t\t<animated.circle className={styles.node} fill={mainColor} opacity={name === active ?  .8 : .6} stroke={secColor} r={dr}>\n\t\t\t\t</animated.circle>\n\t\t\t\t{showname  ? <CircleLabel r={r} name={name}/> : null}\n\t\t\t\t</animated.g>)\n\n}\n\nfunction TeamCircles({width, height, salaries, year, isVisible,active}){\n\n\tconst [data, setData] = useState(salaries)\n\n\tuseEffect(() => {\n\n\t\tvar newdata = {}\n\t\t\tnewdata.mainColor = salaries.mainColor;\n\n\t\t\tnewdata.secColor = salaries.secColor; \n\t\t\tnewdata.totals = salaries[salaries.length-1]\n\n\t\tnewdata.children = salaries.children.map(d => {\n\t\t\tlet obj = {...d}\n\t\t\tobj.r = size(obj[year])\n\t\t\tobj.showname = obj.r > 20 ? true : false;\n\n\n\t\t\treturn obj\n\t\t})\n\n\t\t packSiblings(newdata.children)\n\n\t\t setData(newdata)\n\n\t},[year])\n\nreturn isVisible ? (<g transform={`translate(${width/2},${height/2})`}> \n\t\t\t{data && data.children.map((d,i)=> \n\n\t\t\t\t<Circle mainColor={data.mainColor} secColor={data.secColor} \n\t\t\t\t\t\tshowname={d.showname} \n\t\t\t\t\t\tname={d.Player} \n\t\t\t\t\t\tkey={i} \n\t\t\t\t\t\tx={d.x} \n\t\t\t\t\t\ty={d.y} \n\t\t\t\t\t\tr={d.r - PADDING}\n\t\t\t\t\t\tage={d.age}\n\t\t\t\t\t\tsigned={d.signed}\n\t\t\t\t\t\tactive={active} />\n\t\t\n\t\t\t\t) }\n\t\t</g>) : null\n}\n\nconst convertName = (n) => {\n\n\tlet index = n.indexOf('\\\\');\n\n\n\n\treturn n.substring(0,index)\n\n}\n\n\nconst openBasketballRef = (name) => {\n\n\twindow.open(`https://www.basketball-reference.com/contracts/${name}.html`)\n}\n\nfunction Team({team_data,team_names,width,height,year, isVisible}) {\n\n\tconst [salaries, setSalaries] = useState(null)\n\tconst ref = useRef()\n\n\n\tlet {top, left} = usePosition(ref)\n\n\tuseEffect(()=> {\n\n\t\tconst my_team = team_data.Team;\n\n\t\tconst abrv = team_names[my_team],\n\t\t     mainColor = colorMap[abrv].mainColor,\n\t\t     secColor = colorMap[abrv].secondaryColor;\n\n\n\t\tcsv(`/data/teams/${team_data.Team}.csv`, function(d) {\n\t\t\t\t  return {\n\n\t\t\t\t   \tPlayer: convertName(d.Player),\n\t\t\t\t   \tage: d.Age,\n\t\t\t\t   \tsigned: d['Signed Using'],\n\t\t\t\t   \tr: size(moneyConverter(d[year])),\n\t\t\t\t   \tshowname: size(moneyConverter(d[year])) > 20 ? true : false,\n\t\t\t\t   \t'2018-19': moneyConverter(d[\"2018-19\"]),\n\t\t\t\t   \t'2019-20': moneyConverter(d[\"2019-20\"]),\n\t\t\t\t   \t'2020-21': moneyConverter(d[\"2020-21\"]),\n\t\t\t\t   \t'2021-22': moneyConverter(d[\"2021-22\"]),\n\t\t\t\t   \t'2022-23': moneyConverter(d[\"2022-23\"]),\n\t\t\t\t   \t'2023-24': moneyConverter(d[\"2023-24\"]),\n\t\t\t\t  };\n\t\t\t}).then(d => {\n\n\t\t\tlet root = {children: d.slice(0,d.length-1)};\n\t       \n\n\t\t\tlet width = 300;\n\t\t\t  let height = 300;\n\n\t\t\t  \troot.mainColor = mainColor;\n\t\t\t  \troot.secColor = secColor;\n\t\t\t  \troot.totals = d[d.length-1]\n\n\t\t\t\tsetSalaries(root)\n\t\t}) \t\t\n\n\t},[])\n\n\n\tconst tooltip_state = useTooltip()\n\n\treturn (\n\t\t<tooltipContext.Provider value={tooltip_state}>\n\t\t<svg className={styles.bballteamsvg} width={width} height={height} ref={ref}>\n\t\t\t<text className={styles.titlelabel} onClick={() => openBasketballRef(team_names[team_data.Team])} dx=\"10\" dy=\"20\"> \n\t\t\t\t{team_data.Team} - {salaries && `$${formatMoney(salaries.totals[year])} mil`} \n\t\t\t</text>\n\t\t\t\t{salaries !== null && <TeamCircles active={tooltip_state.tooltip.active}  {...{year,width,height, isVisible}} salaries={salaries}/>}\n\t\t</svg>\n\t\t<Tooltip tooltip={tooltip_state.tooltip} top={top} left={left}/>\n\t\t</tooltipContext.Provider>)\n}\n\nconst years = ['2018-19','2019-20','2020-21','2021-22','2022-23','2023-24']\n\n\nconst formatYear = (y) => {\n\t// if(window.innerWidth < 768){\n\t\tlet y1 = y.substring(2,4),\n\t\t\ty2 = y.substring(y.length-2,y.length);\n\n\t\treturn `'${y1}-'${y2}`\n\t// }\n\t// else return y\n}\n\nconst YearClicker = ({year, setYear}) => { \n\n\treturn (<div className={styles.stepcontainer}>\n\t\t{years.map( (d,i) => <h2 key={i} className={styles.steptitle}onClick={() => setYear(i)} style={d === year ? {\"textDecoration\":\"underline\",color:'lightblue'} : null}>{formatYear(d)}</h2> )}\n\t\t</div>)\n}\n\nconst LandingPage = ({next}) => {\n\n\n\treturn <div>\n\t\t\t\t<h2> Welcome to the NBA salaries visualization </h2>\n\t\t \t</div>\n}\n\nclass Basketball extends Component {\n\n\n\tstate = {year: '2018-19',index:0,t:null, landing: true}\n\n\n\tsetYear = (i) => {\n\t\tif(i !== -1){\n\t\t\tclearInterval(this.state.t)\n\t\t\tthis.setState({year:years[i], index:i, t:null, })\n\t\t}\n\t\telse {\n\n\t\t\tthis.setState(state => state.index === years.length - 1 ? {year:years[0], index:0} : {year:years[state.index + 1],index: state.index+1 })\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\n\n\t\tcsv(`/data/all_salaries.csv`).then((data) => {\n\t\t\tcsv(`/data/team_abrv.csv`).then((team_names) => {\n\n\n\t\t\t\tvar map = {}\n\n\t\t\t\tteam_names.forEach((d)=>{\n\n\t\t\t\t\tmap[d.long] = d.short\n\n\t\t\t\t})\n\n\t\t\t\tthis.setState({all_salaries: data, team_names: map})\n\t\t\t})\t\t\n\t\t})\n\n\n\n\t\tvar t = setInterval(()=>{\n\t\t\tthis.setYear(-1)\n\t\t},3000)\n\n\t\tthis.setState({t})\n\n\t}\n\n\tpauseOrPlay = () => {\n\t\tif(this.state.t !== null) {\n\t\t\tclearInterval(this.state.t)\n\t\t\tthis.setState({t:null})\n\t\t}else {\n\t\t\tvar t = setInterval(()=>{\n\t\t\t\tthis.setYear(-1)\n\t\t\t},3000)\n\t\t\tthis.setState({t})\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (<div id=\"basketball-viz\"> \n\t\t\t\t\t{this.state.landing ? \n\t\t\t\t\t<>\n\t\t\t\t\t\t<YearClicker setYear={this.setYear} year={this.state.year}/>\n\t\t\t\t\t\t<p className={styles.pause} onClick={this.pauseOrPlay}>{this.state.t ? 'Pause' : 'Play'}</p>\n\t\t\t\t\t\t<div className={styles.vizcontainer}>\n\t\t\t\t\t\t{this.state.all_salaries && this.state.team_names && this.state.all_salaries.map( (d,i) => \n\t\t\t\t\t\t<TrackVisibility offset={200} style={{\"width\":\"370px\", \"display\":\"inline\"}} partialVisibility key={i} >\n\t\t\t\t\t\t\t<Team team_names={this.state.team_names} year={this.state.year}  width={350} height={350} team_data={d}/>\n\t\t\t\t\t\t</TrackVisibility>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div> \n\t\t\t\t\t</>\n\t\t\t\t\t: <LandingPage next={() => this.setState({landing: true})}/> }\n\n\t\t\t\t</div>)\n\t}\n}\n\nexport default Basketball\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"node\":\"viz_node__1B4nM\",\"namelabel\":\"viz_namelabel__2fzWq\",\"steptitle\":\"viz_steptitle__3sMfK\",\"stepcontainer\":\"viz_stepcontainer__3M7Gg\",\"vizcontainer\":\"viz_vizcontainer__13TCo\",\"pause\":\"viz_pause__9rAeZ\",\"titlelabel\":\"viz_titlelabel__2aYSq\",\"Tooltip\":\"viz_Tooltip__a7TgW\",\"tooltipname\":\"viz_tooltipname__MHq6R\",\"Tooltipcontents\":\"viz_Tooltipcontents__3lDak\",\"bballteamsvg\":\"viz_bballteamsvg__1Nd8U\"};"],"sourceRoot":""}