{"version":3,"sources":["OrbitControls.js","index.js"],"names":["OrbitControls","object","domElement","this","undefined","document","enabled","target","THREE","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MIDDLE","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","add","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","window","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_DOLLY_PAN","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","dollyIn","dollyScale","dollyOut","handleMouseDownPan","event","clientX","clientY","preventDefault","focus","button","ctrlKey","metaKey","shiftKey","handleMouseDownRotate","handleMouseDownDolly","addEventListener","subVectors","x","y","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","prototype","Object","create","constructor","defineProperties","center","get","noZoom","value","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","CIRCLE_SIZE","React","Component","Controls","props","ref","useRef","_useThree","useThree","camera","scene","react_default","a","createElement","assign","args","near","far","getSunPosition","date","lng","lat","sin","cos","asin","atan2","r","t","m","c","l","e","sl","cr","sr","d","h","sd","cd","ch","azimuth","altitude","diameter","getColor","main_path","color","Suns","_ref","group","worlddata","cities","onMouseOverSun","_useState","useState","_useState2","slicedToArray","isClearing","savedCallback","useEffect","current","_useMemo","useMemo","map","_getSunPosition","Date","now","city","name","latlongToWorld","mat","_useMemo2","geo","coords","Globe","_ref2","i","key","geometry","material","_ref3","Fragment","vertex","_ref4","_ref5","longitude","latitude","lambda","_ref6","_ref7","App","_useState3","_useState4","focusedSun","setFocusedSun","onClick","className","style","transform","concat","sun","dist","onWheel","intensity","log","d3","then","world","topojson","objects","land","mesh","multilinestring","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","coordinates","Symbol","iterator","next","done","P","p1","vertices","push","err","return","wireframe","process","obj","columns","apply","ReactDOM","render","getElementById","sort","b"],"mappings":"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","file":"static/js/main.38286b97.chunk.js","sourcesContent":["import * as THREE from 'three'\n\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nlet OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: THREE.MOUSE.LEFT, MIDDLE: THREE.MOUSE.MIDDLE, RIGHT: THREE.MOUSE.RIGHT };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\t\t\tscope.target.add( panOffset );\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\t//console.log( 'handleMouseDownPan' );\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\t//console.log( 'handleMouseMovePan' );\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( event ) {\n\n\t\t// console.log( 'handleMouseUp' );\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\t// console.log( 'handleMouseWheel' );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\t// console.log( 'handleKeyDown' );\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchStartDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchMoveDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyIn( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchEnd( event ) {\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\t// Prevent the browser from scrolling.\n\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase scope.mouseButtons.LEFT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.MIDDLE:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.RIGHT:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY_PAN ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\nObject.defineProperties( OrbitControls.prototype, {\n\n\tcenter: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .center has been renamed to .target' );\n\t\t\treturn this.target;\n\n\t\t}\n\n\t},\n\n\t// backward compatibility\n\n\tnoZoom: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\treturn ! this.enableZoom;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\tthis.enableZoom = ! value;\n\n\t\t}\n\n\t},\n\n\tnoRotate: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\treturn ! this.enableRotate;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\tthis.enableRotate = ! value;\n\n\t\t}\n\n\t},\n\n\tnoPan: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\treturn ! this.enablePan;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\tthis.enablePan = ! value;\n\n\t\t}\n\n\t},\n\n\tnoKeys: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\treturn ! this.enableKeys;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\tthis.enableKeys = ! value;\n\n\t\t}\n\n\t},\n\n\tstaticMoving: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\treturn ! this.enableDamping;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\tthis.enableDamping = ! value;\n\n\t\t}\n\n\t},\n\n\tdynamicDampingFactor: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\treturn this.dampingFactor;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\tthis.dampingFactor = value;\n\n\t\t}\n\n\t}\n\n} );\n\nexport default OrbitControls","import ReactDOM from 'react-dom';\n\nimport * as THREE from 'three';\nimport React, {useState, useRef,useMemo,useEffect} from 'react'\n\nimport {Canvas,useRender, useThree, apply} from 'react-three-fiber';\n\nimport OrbitControls from './OrbitControls'\n\nimport {useSpring, animated} from 'react-spring/three';\n\nimport * as d3 from 'd3';\nimport * as topojson from \"topojson-client\";\n\nimport './index.css';\n\nimport Slider from '@material-ui/lab/Slider';\n\nconst CIRCLE_SIZE = .5;\n\n\n\n\n\n\nconst styles = {\n  root: {\n    width: 300,\n  },\n  slider: {\n    padding: '22px 0px',\n  },\n};\n\nclass SimpleSlider extends React.Component {\n  state = {\n    value: 50,\n  };\n\n  handleChange = (event, value) => {\n    this.setState({ value });\n  };\n\n  render() {\n\n    const { value } = this.state;\n\n    return (\n      <div className=\"slider\">\n        {/* <Typography id=\"label\">Slider label</Typography> */}\n        <Slider \n          value={value}\n          aria-labelledby=\"label\"\n          onChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nfunction Controls(props) {\n    const ref = useRef()\n    const { camera, scene } = useThree()\n//     var geometry = new THREE.SphereBufferGeometry( 17, 90, 90 );\n// var material = new THREE.MeshBasicMaterial( {color: 'grey'} );\n// var sphere = new THREE.Mesh( geometry, material );\n// scene.add( sphere );\n    // useRender(() => ref.current.obj.update())\n    camera.position.x = -40;\n    return <orbitControls ref={ref} args={[camera]} {...props} />\n  }\n  \n  const camera = {\n    fov: 75, near: 0.1, far: 1000,\n    // \"position.z\": 2,\n  }\n\nconst getSunPosition = (date, lng, lat) => {\n    const {sin, cos, asin, atan2, PI} = Math, \n          r = PI / 180, t = date / 315576e7 - 0.3,\n          m = r * (357.52911 + t * (35999.05029 - t * 1537e-7)), c = cos(r * (125.04 - 1934.136 * t)),\n          l = r * (280.46646 + t * (36000.76983 + t * 3032e-7) + (1.914602 - t * (4817e-6 - t * 14e-6)) * sin(m) - \n                   569e-5 - 478e-5 * c) + (0.019993 - 101e-6 * t) * sin(2 * m) + 289e-6 * sin(3 * m),\n          e = r * (84381.448 - t * (46.815 - t * (59e-5 + 1813e-6 * t))) / 3600 + r * 256e-5 * c,\n          sl = sin(l), cr = cos(r * lat), sr = sin(r * lat), d = asin(sin(e) * sl),\n          h = r * (280.46061837 + 13184999.8983375 * t + lng) - atan2(cos(e) * sl, cos(l)),\n          sd = sin(d), cd = cos(d), ch = cos(h);\n    return {\n      azimuth: PI + atan2(sin(h), ch * sr - cr * sd / cd), \n      altitude: asin(sr * sd + cr * cd * ch)\n    };\n  }\n\nconst diameter = 180 / Math.PI;\n\n// const getColor = (h) =>{\n\n// const getColor = d3.scaleQuantile().domain([-18,-6,-.833,6]).range(['#d7191c','#fdae61','#ffffbf','#abd9e9','#2c7bb6'].reverse())\n\n// }\n  const getColor = (h) => h < -18 ? '#74add1' :\n    h < -6 ? '#abd9e9' :\n    h < -0.833 ? '#e0f3f8' :\n    h < 6 ? '#fee090' : '#ffffaa';\n\n\n\n\nconst main_path = new THREE.MeshBasicMaterial({color: new THREE.Color(\"white\")})\n\n\n\n\nfunction Suns({group, worlddata, onMouseOverSun,cities}){\n\n  const { camera } = useThree()\n\n  const [isClearing, setIsClearing] = useState(false)\n  const savedCallback = useRef()\n    const onMouseOverLocal = (sun,e) => {\n      console.log(\"onMouseOverLocal\")\n      camera.position.x = -40;\n      camera.position.y = -40;\n      setIsClearing(false)\n      onMouseOverSun(sun, e)\n    }\n\n    let  theta = 80;\n\n    // useRender(() => {\n    //     // const r = 5 * Math.sin(THREE.Math.degToRad((theta +=.1)))\n    //     // const s = Math.cos(THREE.Math.degToRad(theta*2))\n    //     const r = 5 * Math.sin(THREE.Math.degToRad(theta))\n    //     const s = Math.cos(THREE.Math.degToRad(theta))\n\n    //     // group.current.rotation.set(r,r,r)\n    //     // group.current.scale.set(s,s,s)\n    // })\n\n    useEffect(() => {\n      savedCallback.current = isClearing;\n    })\n  \n\n    const onClearSun = () => {\n      setIsClearing(true)\n      setTimeout(() => {\n        if (!savedCallback.current) return\n        onMouseOverSun(null)\n        setIsClearing(false)\n      }, 500)\n    }\n\n    const [geo, coords] = useMemo(() => {\n        const geo = new THREE.SphereBufferGeometry(CIRCLE_SIZE,6,6)\n        const coords = cities.map(c => {\n            const {azimuth, altitude} = getSunPosition(Date.now(), +c[1], +c[2]);\n            let color = getColor(diameter * altitude);\n            \n            return {city:{name:c[0], azimuth, altitude} ,c:latlongToWorld([c[1],c[2]]),\n                mat: () => new THREE.MeshBasicMaterial({color: new THREE.Color(color)})}\n            }    \n    )\n      \n        return [geo,coords]\n    },[])\n\n\n\n    return (<group ref={group}>\n        <Globe worlddata={worlddata}/>\n        {coords.map( ({city,c, mat},i) => (\n            <mesh  key={i} \n            // onPointerOver={e => onMouseOverLocal(city,e)} onPointerOut={onClearSun}\n             geometry={geo} material={mat()} position={c}/>\n        ))}\n    </group>)\n\n} \n\n// https://observablehq.com/@mbostock/geojson-in-three-js\n\n\nfunction Globe({worlddata}){\n\n\n    return (<>\n            \n               <lineSegments  geometry={worlddata.geometry} material={main_path} position={[0,0,0]}/>\n               \n            \n    </>)\n}\n\nconst radius = 100;\n\nfunction vertex([longitude, latitude], radius) {\n    const lambda = longitude * Math.PI / 180;\n    const phi = latitude * Math.PI / 180;\n    return new THREE.Vector3(\n      radius * Math.cos(phi) * Math.cos(lambda),\n      radius * Math.sin(phi),\n      -radius * Math.cos(phi) * Math.sin(lambda)\n    );\n  }\n\n\n\nfunction latlongToWorld([longitude, latitude]) {\n    const lambda = longitude * Math.PI / 180;\n    const phi = latitude * Math.PI / 180;\n    return [\n      radius * Math.cos(phi) * Math.cos(lambda),\n      radius * Math.sin(phi),\n      -radius * Math.cos(phi) * Math.sin(lambda)\n    ];\n  }\n\n\n  function wireframe(multilinestring, radius, material) {\n    const geometry = new THREE.Geometry();\n    for (const P of multilinestring.coordinates) {\n      for (let p0, p1 = vertex(P[0], radius), i = 1; i < P.length; ++i) {\n        geometry.vertices.push(p0 = p1, p1 = vertex(P[i], radius));\n      }\n    }\n    return new THREE.LineSegments(geometry, material);\n  }\n\nfunction App(props){\n    \n  const [focusedSun, setFocusedSun] = useState(null)\n\n  const onClick = () => {\n    // setShowingAxes(false)\n    setFocusedSun(null)\n  }\n\n    const onMouseOverSun=(sun, e) => {\n      \n      console.log(sun, e)\n\n\n      setFocusedSun(!sun ? null : {\n        sun,\n        position: {\n          x: e.clientX,\n          y: e.clientY\n        },\n      })\n    }\n\n    let group = useRef();\n    return (\n    <>\n   \n            {!!focusedSun && (\n          <div className=\"tooltip\" style={{\n            transform: `translate(calc(-50% + ${focusedSun.position.x}px), calc(-100% + ${focusedSun.position.y}px))`\n          }}>\n            <div className=\"tooltip__title\">\n              { focusedSun.sun.name }\n            </div>\n          </div>\n        )}\n        <Canvas onWheel={onClick} onMouseDown={onClick}  camera={camera} {...props}>\n                <Controls/>\n        <pointLight\n          position={[3,3,3]}\n          color=\"#12CBC4\"\n          intensity={2}\n          />\n        <ambientLight color=\"#fff\" intensity={0.5} />\n        <ambientLight color=\"#5758BB\" intensity={0.4} />\n            <Suns  cities={props.cities} onMouseOverSun={onMouseOverSun} group={group} worlddata={props.worlddata}/>\n             </Canvas>\n            \n             </>)\n}\n\nd3.json(\"https://cdn.jsdelivr.net/npm/world-atlas@1/world/110m.json\")\n       .then(world => {\n\n     \n        \n        return topojson.mesh(world, world.objects.land)\n    \n    })\n       .then(mesh=> \n             wireframe(mesh, radius, new THREE.LineBasicMaterial({color: 0xff0000}))\n       )\n      //  .then(d => {\n           \n      //   ReactDOM.render(<App worlddata={d} cities={cities_top}/>, document.getElementById('root'));\n\n\n      //  })\n\n\n\n       .then(d => {\n        d3.csv(process.env.PUBLIC_URL +'/data/worldcities.csv',(d) => {\n          let obj = []\n          obj[0] = d[\"city\"]\n          obj[2] = +d[\"lat\"]\n          obj[1] = +d[\"lng\"]\n          return obj\n        }).then((c) => {\n        delete c.columns\n\n        apply({OrbitControls})\n\n        ReactDOM.render(<App worlddata={d} cities={c}/>, document.getElementById('root'));\n       })\n      \n\n     })\n\n\n\n\nconst cities_top = [\n    [\"London\", -0.127758, 51.507351],\n    [\"Berlin\", 13.404954, 52.520008],\n    [\"Amsterdam\", 4.895168, 52.370216],\n    [\"Helsinki\", 24.938379, 60.169857],\n    [\"Paris\", 2.352222, 48.856613],\n    [\"Barcelona\", 2.173404, 41.385063],\n    [\"Lisbon\", -9.139337, 38.722252],\n    [\"Budapest\", 19.040236, 47.497913],\n    [\"Prague\", 14.437800, 50.075539],\n    [\"Madrid\", -3.703790, 40.416775],\n    [\"Vienna\", 16.373819, 48.208176],\n    [\"Dublin\", -6.260310, 53.349804],\n    [\"Reykjavik\", -21.942400, 64.147209],\n    [\"Copenhagen\", 12.568337, 55.676098],\n    [\"Stockholm\", 18.068581, 59.329323],\n    [\"Dakar\", -17.467686, 14.716677],\n    [\"Kyiv\", 30.542721, 50.447731],\n    [\"Moscow\", 37.617298, 55.755825],\n    [\"Minsk\", 27.561523, 53.904541],\n    [\"Novosibirsk\", 82.933952, 55.018803],\n    [\"Rome\", 12.496365, 41.902782],\n    [\"Munich\", 11.581981, 48.135124],\n    [\"Istanbul\", 28.978359, 41.008240],\n    [\"Baghdad\", 44.361488, 33.312805],\n    [\"Tehran\", 51.388973, 35.689198],\n    [\"Kabul\", 69.207489, 34.555347],\n    [\"Warsaw\", 21.012230, 52.229675],\n    [\"Oslo\", 10.752245, 59.913868],\n    [\"Bangkok\", 100.501762, 13.756331],\n    [\"Singapore\", 103.819839, 1.352083],\n    [\"Kuala Lumpur\", 101.686852, 3.139003],\n    [\"Tokyo\", 139.691711, 35.689487],\n    [\"Hong Kong\", 114.109497, 22.396427],\n    [\"Seoul\", 126.977966, 37.566536],\n    [\"Taipei\", 121.565414, 25.032969],\n    [\"Shanghai\", 121.473701, 31.230391],\n    [\"Beijing\", 116.407394, 39.904202],\n    [\"Bangalore\", 77.594566, 12.971599],\n    [\"New York City\", -74.005974, 40.712776],\n    [\"San Francisco\", -122.419418, 37.774929],\n    [\"Los Angeles\", -118.243683, 34.052235],\n    [\"Vancouver\", -123.120735, 49.282730],\n    [\"Seattle\", -122.332069, 47.606209],\n    [\"Boston\", -71.058884, 42.360081],\n    [\"Austin\", -97.743057, 30.267153],\n    [\"Toronto\", -79.383186, 43.653225],\n    [\"Washington, DC\", -77.036873, 38.907192],\n    [\"Montreal\", -73.567253, 45.501690],\n    [\"Mexico City\", -99.133209, 19.432608],\n    [\"Buenos Aires\", -58.381557, -34.603683],\n    [\"Sao Paulo\", -46.633308, -23.550520],\n    [\"Sydney\", 151.209900, -33.865143],\n    [\"Melbourne\", 144.946457, -37.840935],\n    [\"Auckland\", 174.763336, -36.848461],\n    [\"Honolulu\", -157.858093, 21.315603]\n  ].sort((a, b) => a[1] - b[1])"],"sourceRoot":""}